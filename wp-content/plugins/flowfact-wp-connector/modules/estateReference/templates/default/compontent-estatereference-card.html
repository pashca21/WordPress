<!-- estate -->		
<article class="FFestateReference-default-overview-estate">

	<!-- estate image -->	
	{% set image = "" %}
		
	{% if estates.multimedia %}
		{% for key, media in estates.multimedia %}		
			{% if key == "main_image" and media|length > 0 %}
				{% for field in media %}
					{% set image = field.multimedia.fileReference %}					
				{% endfor %}			
			{% endif %}
		{% endfor %}
	{% else %}	
		{% if estates.mainImage.mainImage.0.value %}
			{% set image = estates.mainImage.mainImage.0.value %}
		{% endif %}
	{% endif %}
		

	{% if image %}
		<div  class="FFestateReference-default-overview-estate-image" >
			<div style="background-image:url({{api.cloudimage.url}}300/n/{{ image }})">
			
				{% if estates.price %}
					<div class="FFestateReference-default-overview-estate-salestype ff-color-secondary ff-bg-primary">
						{% for key,field in estates.price %}
							{% if field.value > 1 and key == "purchaseprice" %}
								Verkauft
							{% endif %}
							{% if field.value > 1 and key == "rent" %}
								Vermietet
							{% endif %}		

						{% endfor %}
					</div>				
				{% endif %}	
				
			</div>					
		</div>
	{% else %}
		<div  class="FFestateReference-default-overview-estate-image" >
			<div style="background-color:#eee">
			
				{% if estates.price %}
					<div class="FFestateReference-default-overview-estate-salestype ff-color-secondary ff-bg-primary">
						{% for key,field in estates.price %}
							{% if field.value > 1 and key == "purchaseprice" %}
								Verkauft
							{% endif %}
							{% if field.value > 1 and key == "rent" %}
								Vermietet
							{% endif %}		

						{% endfor %}
					</div>				
				{% endif %}	
			
			</div>
		</div>
	{% endif %}	

	
	<!-- estate type -->	
	<div>				
		<div class="FFestateReference-default-overview-estate-type">
			{% if estates.estatetype %}
				{% for field in estates.estatetype %}
					{% if field.value %}
						{% for val in field.value %}
							<span>{{ val }} {{schema}}</span>
						{% endfor %}
					{% endif %}
				{% endfor %}
			{% endif %}		
		</div>				
			
		<!-- estate address -->
		<div class="FFestateReference-default-overview-estate-addresses">
			{% if estates.addresses %}
				{% for field in estates.addresses %}
					{% if field.value %}
						{{ field.value.zipcode }} {{ field.value.city }} {{ field.value.district }}
					{% endif %}		
				{% endfor %}	
			{% endif %}	
		</div>		
		
		<!-- estate details -->
		<div class="FFestateReference-default-overview-estate-details">
			{% if estates.details %}
				{% for key,field in estates.details %}
					{% if field.type == "option"%}
						{% for val in field.value %}
							{% if val %}
								<div class="{{key}}">
									<div class="FFestateReference-default-overview-estate-details-values"><span>{{field.caption}}</span><span>{{ val }}<i>{{field.unit}}</i></span></div>	
								</div>
							{% endif %}	
						{% endfor %}
					{% else %}	
						{% if field.value %}
							<div class="{{key}}">
								<div class="FFestateReference-default-overview-estate-details-values"><span>{{field.caption}}</span><span>{{ field.value }}<i>{{field.unit}}</i></span></div>	
							</div>
						{% endif %}		
					{% endif %}	
				{% endfor %}	
			{% endif %}	
		</div>	
	</div>	
</article>
